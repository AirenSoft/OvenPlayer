/*! For license information please see ovenplayer-d0b4146.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=u(n(318)),r=u(n(319)),a=u(n(67)),i=u(n(313)),s=n(65),c=n(1);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){OvenPlayerConsole.log("[Provider] loaded. ");var u={};(0,a.default)(u);var l=e.element,d=null,f=null;e.adTagUrl&&(OvenPlayerConsole.log("[Provider] Ad Client - ",t.getAdClient()),(d=t.getAdClient()===c.AD_CLIENT_VAST?(0,r.default)(l,u,t,e.adTagUrl):(0,o.default)(l,u,t,e.adTagUrl))||console.log("Can not load due to google ima for Ads.")),f=(0,i.default)(l,u,d?d.videoEndedCallback:null,t),l.playbackRate=l.defaultPlaybackRate=t.getPlaybackRate();var g=function(o){var r=e.sources[e.currentSource];if(e.framerate=r.framerate,u.setVolume(t.getVolume()),e.framerate||t.setTimecodeMode(!0),n)n(r,o);else{OvenPlayerConsole.log("source loaded : ",r,"lastPlayPosition : "+o);var a=l.src;r.file!==a&&(l.src=r.file,(a||""===a)&&l.load(),o&&o>0&&u.seek(o)),o>0&&(u.seek(o),t.isAutoStart()),t.isAutoStart()}};return u.getName=function(){return e.name},u.getMse=function(){return e.mse},u.canSeek=function(){return e.canSeek},u.setCanSeek=function(t){e.canSeek=t},u.isSeeking=function(){return e.seeking},u.setSeeking=function(t){e.seeking=t},u.setMetaLoaded=function(){e.isLoaded=!0},u.metaLoaded=function(){return e.isLoaded},u.setState=function(t){if(e.state!==t){var n=e.state;if(OvenPlayerConsole.log("Provider : setState()",t),n===c.STATE_AD_PLAYING&&(t===c.STATE_ERROR||t===c.STATE_IDLE))return!1;switch(OvenPlayerConsole.log("Provider : triggerSatatus",t),t){case c.STATE_COMPLETE:u.trigger(c.PLAYER_COMPLETE);break;case c.STATE_PAUSED:u.trigger(c.PLAYER_PAUSE,{prevState:e.state,newstate:c.STATE_PAUSED});break;case c.STATE_AD_PAUSED:u.trigger(c.PLAYER_PAUSE,{prevState:e.state,newstate:c.STATE_AD_PAUSED});break;case c.STATE_PLAYING:u.trigger(c.PLAYER_PLAY,{prevState:e.state,newstate:c.STATE_PLAYING});case c.STATE_AD_PLAYING:u.trigger(c.PLAYER_PLAY,{prevState:e.state,newstate:c.STATE_AD_PLAYING})}e.state=t,u.trigger(c.PLAYER_STATE,{prevstate:n,newstate:e.state})}},u.getState=function(){return e.state},u.setBuffer=function(t){e.buffer=t},u.getBuffer=function(){return e.buffer},u.isLive=function(){return!!e.isLive||l.duration===1/0},u.getDuration=function(){return u.isLive()?1/0:l.duration},u.getPosition=function(){return l?l.currentTime:0},u.setVolume=function(e){if(!l)return!1;l.volume=e/100},u.getVolume=function(){return l?100*l.volume:0},u.setMute=function(e){return!!l&&(void 0===e?(l.muted=!l.muted,u.trigger(c.CONTENT_MUTE,{mute:l.muted})):(l.muted=e,u.trigger(c.CONTENT_MUTE,{mute:l.muted})),l.muted)},u.getMute=function(){return!!l&&l.muted},u.preload=function(n,o){return e.sources=n,e.currentSource=(0,s.pickCurrentSource)(n,t),g(o||0),new Promise(function(e,n){t.isMute()&&u.setMute(!0),t.getVolume()&&u.setVolume(t.getVolume()),e()})},u.load=function(n){e.sources=n,e.currentSource=(0,s.pickCurrentSource)(n,t),g(0)},u.play=function(){if(OvenPlayerConsole.log("Provider : play()"),!l)return!1;if(u.getState()!==c.STATE_PLAYING)if(d&&d.isActive()||d&&!d.started())d.play().then(function(e){OvenPlayerConsole.log("Provider : ads play success")}).catch(function(e){OvenPlayerConsole.log("Provider : ads play fail",e)});else{var e=l.play();void 0!==e?e.then(function(){OvenPlayerConsole.log("Provider : video play success")}).catch(function(e){OvenPlayerConsole.log("Provider : video play error",e.message)}):OvenPlayerConsole.log("Provider : video play success (ie)")}},u.pause=function(){if(OvenPlayerConsole.log("Provider : pause()"),!l)return!1;u.getState()===c.STATE_PLAYING?l.pause():u.getState()===c.STATE_AD_PLAYING&&d.pause()},u.seek=function(e){if(!l)return!1;l.currentTime=e},u.setPlaybackRate=function(e){return!!l&&(u.trigger(c.PLAYBACK_RATE_CHANGED,{playbackRate:e}),l.playbackRate=l.defaultPlaybackRate=e)},u.getPlaybackRate=function(){return l?l.playbackRate:0},u.getSources=function(){return l?e.sources.map(function(e,t){var n={file:e.file,type:e.type,label:e.label,index:t,sectionStart:e.sectionStart,sectionEnd:e.sectionEnd,gridThumbnail:e.gridThumbnail};return e.lowLatency&&(n.lowLatency=e.lowLatency),n}):[]},u.getCurrentSource=function(){return e.currentSource},u.setCurrentSource=function(n,o){if(n>-1&&e.sources&&e.sources.length>n)return OvenPlayerConsole.log("source changed : "+n),e.currentSource=n,u.trigger(c.CONTENT_SOURCE_CHANGED,{currentSource:n}),t.setSourceIndex(n),u.setState(c.STATE_IDLE),o&&g(l.currentTime||0),e.currentSource},u.getQualityLevels=function(){return l?e.qualityLevels:[]},u.getCurrentQuality=function(){return l?e.currentQuality:null},u.setCurrentQuality=function(e){},u.isAutoQuality=function(){},u.setAutoQuality=function(e){},u.getFramerate=function(){return e.framerate},u.setFramerate=function(t){return e.framerate=t},u.seekFrame=function(t){var n=e.framerate,o=(l.currentTime*n+t)/n;o+=1e-5,u.pause(),u.seek(o)},u.stop=function(){if(!l)return!1;for(OvenPlayerConsole.log("CORE : stop() "),l.removeAttribute("preload"),l.removeAttribute("src");l.firstChild;)l.removeChild(l.firstChild);u.pause(),u.setState(c.STATE_IDLE)},u.destroy=function(){if(!l)return!1;u.stop(),f.destroy(),d&&(d.destroy(),d=null),u.off(),OvenPlayerConsole.log("CORE : destroy() player stop, listener, event destroied")},u.super=function(e){var t=u[e];return function(){return t.apply(u,arguments)}},u}},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(65);t.default=function(e,t,n,a){var i={};OvenPlayerConsole.log("EventListener loaded.",e,t);var s={},c=-1,u=e;return i.canplay=function(){t.setCanSeek(!0),t.trigger(o.CONTENT_BUFFER_FULL),OvenPlayerConsole.log("EventListener : on canplay")},i.durationchange=function(){i.progress(),OvenPlayerConsole.log("EventListener : on durationchange"),t.trigger(o.CONTENT_DURATION_CHANGED)},i.ended=function(){OvenPlayerConsole.log("EventListener : on ended"),u.pause(),t.getState()!==o.STATE_IDLE&&t.getState()!==o.STATE_COMPLETE&&t.getState()!==o.STATE_ERROR&&(n?n(function(){t.setState(o.STATE_COMPLETE)}):t.setState(o.STATE_COMPLETE))},i.loadeddata=function(){},i.loadedmetadata=function(){var e=t.getSources(),n=t.getCurrentSource(),r=n>-1?e[n].type:"",a={duration:t.isLive()?1/0:u.duration,type:r};t.setMetaLoaded(),OvenPlayerConsole.log("EventListener : on loadedmetadata",a),t.trigger(o.CONTENT_META,a)},i.pause=function(){return t.getState()!==o.STATE_COMPLETE&&t.getState()!==o.STATE_ERROR&&!u.ended&&!u.error&&u.currentTime!==u.duration&&(OvenPlayerConsole.log("EventListener : on pause"),void t.setState(o.STATE_PAUSED))},i.loadstart=function(){a&&!a.getConfig().showBigPlayButton&&a.getConfig().autoStart&&t.setState(o.STATE_LOADING)},i.play=function(){c=-1,u.paused||t.getState()===o.STATE_PLAYING||t.setState(o.STATE_LOADING)},i.playing=function(){OvenPlayerConsole.log("EventListener : on playing"),c<0&&t.setState(o.STATE_PLAYING)},i.progress=function(){var e=u.buffered;if(!e)return!1;var n=u.duration,r=u.currentTime,a=function(e,t,n){return Math.max(Math.min(e,n),t)}((e.length>0?e.end(e.length-1):0)/n,0,1);t.setBuffer(100*a),t.trigger(o.CONTENT_BUFFER,{bufferPercent:100*a,position:r,duration:n}),OvenPlayerConsole.log("EventListener : on progress",100*a)},i.timeupdate=function(){var e=u.currentTime,n=u.duration;if(!isNaN(n)){if(e>n)return u.pause(),void t.setState(o.STATE_COMPLETE);var r=t.getSources()[t.getCurrentSource()].sectionStart;r&&e<r&&t.getState()===o.STATE_PLAYING&&t.seek(r);var a=t.getSources()[t.getCurrentSource()].sectionEnd;if(a&&e>a&&t.getState()===o.STATE_PLAYING)return t.stop(),void t.setState(o.STATE_COMPLETE);n>9e15&&(n=1/0),t.isSeeking()||u.paused||t.getState()!==o.STATE_STALLED&&t.getState()!==o.STATE_LOADING&&t.getState()!==o.STATE_AD_PLAYING||function(e,t){return e.toFixed(2)===t.toFixed(2)}(c,e)||(c=-1,t.setState(o.STATE_PLAYING)),r&&r>0&&(e-=r)<0&&(e=0),a&&(n=a),r&&(n-=r),(t.getState()===o.STATE_PLAYING||t.isSeeking())&&t.trigger(o.CONTENT_TIME,{position:e,duration:n})}},i.seeking=function(){t.setSeeking(!0),OvenPlayerConsole.log("EventListener : on seeking",u.currentTime),t.trigger(o.CONTENT_SEEK,{position:u.currentTime})},i.seeked=function(){t.isSeeking()&&(OvenPlayerConsole.log("EventListener : on seeked"),t.setSeeking(!1),t.trigger(o.CONTENT_SEEKED))},i.stalled=function(){OvenPlayerConsole.log("EventListener : on stalled")},i.waiting=function(){OvenPlayerConsole.log("EventListener : on waiting",t.getState()),t.isSeeking()?t.setState(o.STATE_LOADING):t.getState()===o.STATE_PLAYING&&(c=u.currentTime,t.setState(o.STATE_STALLED))},i.volumechange=function(){OvenPlayerConsole.log("EventListener : on volumechange",Math.round(100*u.volume)),t.trigger(o.CONTENT_VOLUME,{volume:Math.round(100*u.volume),mute:u.muted})},i.error=function(){var e=u.error&&u.error.code||0,n={0:o.PLAYER_UNKNWON_ERROR,1:o.PLAYER_UNKNWON_OPERATION_ERROR,2:o.PLAYER_UNKNWON_NETWORK_ERROR,3:o.PLAYER_UNKNWON_DECODE_ERROR,4:o.PLAYER_FILE_ERROR}[e]||0;OvenPlayerConsole.log("EventListener : on error",n),(0,r.errorTrigger)(o.ERRORS.codes[n],t)},Object.keys(i).forEach(function(e){u.removeEventListener(e,i[e]),u.addEventListener(e,i[e])}),s.destroy=function(){OvenPlayerConsole.log("EventListener : destroy()"),Object.keys(i).forEach(function(e){u.removeEventListener(e,i[e])})},s}},389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),r=n(26),a=n(1);t.default=function(e,t,n,i,s){var c={},u={},l=null,d=null,f=null,g=null,E={},T=!1,C=!0;s.getConfig().webrtcConfig&&!1===s.getConfig().webrtcConfig.recorverPacketLoss&&(C=s.getConfig().webrtcConfig.recorverPacketLoss);var v=!0;s.getConfig().webrtcConfig&&!1===s.getConfig().webrtcConfig.generatePublicCandidate&&(v=s.getConfig().webrtcConfig.generatePublicCandidate);var S=null,R=(0,r.analUserAgent)();function p(e){var t=null;return g&&e===g.id?t=g.peerConnection:E[e]&&(t=E[e].peerConnection),t}function _(e,r,i,u,d,E){var v={};if(s.getConfig().webrtcConfig&&s.getConfig().webrtcConfig.iceServers)v.iceServers=s.getConfig().webrtcConfig.iceServers,s.getConfig().webrtcConfig.iceTransportPolicy&&(v.iceTransportPolicy=s.getConfig().webrtcConfig.iceTransportPolicy);else if(d){v.iceServers=[];for(var S=0;S<d.length;S++){var R=d[S],p={};p.urls=R.urls;for(var _=!1,A=P(t),L=0;L<p.urls.length;L++)if(p.urls[L].indexOf(A)>-1){_=!0;break}if(!_&&p.urls.length>0){var N=o.default.clone(p.urls[0]),b=O(N);A&&b&&p.urls.push(N.replace(b,A))}p.username=R.user_name,p.credential=R.credential,v.iceServers.push(p)}v.iceTransportPolicy="relay"}else v=c;OvenPlayerConsole.log("Main Peer Connection Config : ",v);var k=new RTCPeerConnection(v);g={id:e,peerId:r,peerConnection:k},k.setRemoteDescription(new RTCSessionDescription(i)).then(function(){k.createAnswer().then(function(t){var n=function(e){for(var t=e.split("\n"),n=-1,o=0;o<t.length-1;o++)if(t[o]=t[o].toLowerCase(),t[o].indexOf("a=rtpmap")>-1&&t[o].indexOf("opus")>-1){n=t[o].split(" ")[0].split(":")[1];break}return n}(i.sdp);n>-1&&function(e,t){for(var n=e.split("\n"),o=!1,r=0;r<n.length-1;r++)if(n[r]=n[r].toLowerCase(),n[r].indexOf("a=fmtp:"+t)>-1){n[r].indexOf("stereo=1")>-1&&(o=!0);break}return o}(i.sdp,n)&&(t.sdp=function(e,t){for(var n=e.split("\n"),o=0;o<n.length-1;o++)if(n[o].indexOf("a=fmtp:"+t)>-1){-1===n[o].indexOf("stereo=1")&&(n[o]=n[o]+";stereo=1");break}return n.join("\n")}(t.sdp,n)),OvenPlayerConsole.log("create Host Answer : success"),k.setLocalDescription(t).then(function(){var t=k.localDescription;OvenPlayerConsole.log("Local SDP",t),h(l,{id:e,peer_id:r,command:"answer",sdp:t})}).catch(function(e){var t=a.ERRORS.codes[a.PLAYER_WEBRTC_SET_LOCAL_DESC_ERROR];t.error=e,m(t)})}).catch(function(e){var t=a.ERRORS.codes[a.PLAYER_WEBRTC_CREATE_ANSWER_ERROR];t.error=e,m(t)})}).catch(function(e){var t=a.ERRORS.codes[a.PLAYER_WEBRTC_SET_REMOTE_DESC_ERROR];t.error=e,m(t)}),u&&y(k,u),k.onicecandidate=function(t){t.candidate&&(OvenPlayerConsole.log("WebRTCLoader send candidate to server : ",t.candidate),h(l,{id:e,peer_id:r,command:"candidate",candidates:[t.candidate]}))},k.onconnectionstatechange=function(e){OvenPlayerConsole.log("[on connection state change]",k.connectionState,e)},k.oniceconnectionstatechange=function(e){OvenPlayerConsole.log("[on ice connection state change]",k.iceConnectionState,e),("disconnected"===k.iceConnectionState||"closed"===k.iceConnectionState)&&(T||g&&m(a.ERRORS.codes[a.PLAYER_WEBRTC_UNEXPECTED_DISCONNECT]))},k.ontrack=function(e){if(OvenPlayerConsole.log("stream received."),OvenPlayerConsole.log("Recovery On Packet Loss :",C),C&&function e(t){t.statisticsTimer&&clearTimeout(t.statisticsTimer),t.status||(t.status={},t.status.lostPacketsArr=[],t.status.slotLength=8,t.status.prevPacketsLost=0,t.status.avg8Losses=0,t.status.avgMoreThanThresholdCount=0,t.status.threshold=40);var n=t.status.lostPacketsArr,r=t.status.slotLength,i=t.status.prevPacketsLost,c=t.status.avg8Losses,u=t.status.threshold;t.statisticsTimer=setTimeout(function(){if(!t.peerConnection)return!1;t.peerConnection.getStats().then(function(l){l&&s.getConfig().autoFallback&&l&&(l.forEach(function(e){if("inbound-rtp"===e.type&&"video"===e.kind&&!e.isRemote){var s=parseInt(e.packetsLost)-parseInt(i);n.push(parseInt(e.packetsLost)-parseInt(i)),n.length>r&&n.shift(),n.length===r&&(c=o.default.reduce(n,function(e,t){return e+t},0)/r,OvenPlayerConsole.log("Last8 LOST PACKET AVG  : "+c,"Current Packet LOST: "+s,"Total Packet Lost: "+e.packetsLost,n),c>u?(t.status.avgMoreThanThresholdCount=t.status.avgMoreThanThresholdCount+1,t.status.avgMoreThanThresholdCount>=60&&(OvenPlayerConsole.log("NETWORK UNSTABLED!!! "),m(a.ERRORS.codes[a.PLAYER_WEBRTC_NETWORK_SLOW]))):t.status.avgMoreThanThresholdCount=0),t.status.prevPacketsLost=e.packetsLost}}),e(t))})},2e3)}(g),f=e.streams[0],n(e.streams[0]),s.getConfig().webrtcConfig&&s.getConfig().webrtcConfig.playoutDelayHint)for(var t=s.getConfig().webrtcConfig.playoutDelayHint,r=g.peerConnection.getReceivers(),i=0;i<r.length;i++){var c=r[i];c.playoutDelayHint=t,OvenPlayerConsole.log("WebRTC playoutDelayHint",c,t)}}}function P(e){var t,n="";return(t=e.match(/^(?:wss?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n\?\=]+)/im))&&(n=t[1]),n}function O(e){var t,n="";return(t=e.match(new RegExp("\\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b","gi")))&&(n=t[0]),n}function A(e){var n=o.default.clone(e),r=P(t),a=O(n.candidate);return""===a||a===r?null:new Promise(function(e,t){"Firefox"!==R.browser||O(r)?(n.candidate=n.candidate.replace(a,r),e(n)):fetch("https://dns.google.com/resolve?name="+r).then(function(e){return e.json()}).then(function(t){if(t&&t.Answer&&t.Answer.length>0)if(t.Answer[0].data){var o=t.Answer[0].data;n.candidate=n.candidate.replace(a,o),e(n)}else e(null);else e(null)})})}function y(e,t){for(var n=0;n<t.length;n++)if(t[n]&&t[n].candidate){var o=t[n];if(e.addIceCandidate(new RTCIceCandidate(o)).then(function(){OvenPlayerConsole.log("addIceCandidate : success")}).catch(function(e){var t=a.ERRORS.codes[a.PLAYER_WEBRTC_ADD_ICECANDIDATE_ERROR];t.error=e,m(t)}),v){var r=A(o);r&&r.then(function(t){t&&e.addIceCandidate(new RTCIceCandidate(t)).then(function(){OvenPlayerConsole.log("cloned addIceCandidate : success")}).catch(function(e){var t=a.ERRORS.codes[a.PLAYER_WEBRTC_ADD_ICECANDIDATE_ERROR];t.error=e,m(t)})})}}}function L(n,o){try{(l=new WebSocket(t)).onopen=function(){h(l,{command:"request_offer"})},l.onmessage=function(t){var n=JSON.parse(t.data);if(n.error){var o=a.ERRORS.codes[a.PLAYER_WEBRTC_WS_ERROR];return o.error=n.error,void m(o)}0!==Object.keys(n).length||n.constructor!==Object?"ping"!==n.command?n.id?("offer"===n.command&&(_(n.id,n.peer_id,n.sdp,n.candidates,n.ice_servers),0===n.peer_id?e.trigger(a.OME_P2P_MODE,!1):e.trigger(a.OME_P2P_MODE,!0)),"request_offer_p2p"===n.command&&function e(t,n){if(f){var o=new RTCPeerConnection(c);E[n]={id:n,peerId:t,peerConnection:o},o.addStream(f),o.createOffer(function(e){o.setLocalDescription(e),h(l,{id:t,peer_id:n,sdp:e,command:"offer_p2p"})},function(e){},{}),o.onicecandidate=function(e){e.candidate&&(OvenPlayerConsole.log("WebRTCLoader send candidate to server : "+e.candidate),h(l,{id:t,peer_id:n,command:"candidate_p2p",candidates:[e.candidate]}))}}else setTimeout(function(){e(t,n)},100)}(n.id,n.peer_id),"answer_p2p"===n.command&&p(n.peer_id).setRemoteDescription(new RTCSessionDescription(n.sdp)).then(function(e){}).catch(function(e){var t=a.ERRORS.codes[a.PLAYER_WEBRTC_SET_REMOTE_DESC_ERROR];t.error=e,m(t)}),"candidate"===n.command&&y(p(n.id),n.candidates),"candidate_p2p"===n.command&&y(p(n.peer_id),n.candidates),"stop"===n.command&&(g.peerId===n.peer_id?(f=null,g.peerConnection.close(),g=null,e.pause(),h(l,{command:"request_offer"})):E[n.peer_id]&&(E[n.peer_id].peerConnection.close(),delete E[n.peer_id]))):OvenPlayerConsole.log("ID must be not null"):h(l,{command:"pong"}):OvenPlayerConsole.log("Empty Message")},l.onclose=function(){if(!T){var e=a.ERRORS.codes[a.PLAYER_WEBRTC_WS_ERROR];g&&(e=a.ERRORS.codes[a.PLAYER_WEBRTC_UNEXPECTED_DISCONNECT]),m(e)}},l.onerror=function(e){if(!T){var t=a.ERRORS.codes[a.PLAYER_WEBRTC_WS_ERROR];t.error=e,m(t)}}}catch(e){m(e)}}function m(t){if(OvenPlayerConsole.log("WebRTC Loader closePeer()"),t||(T=!0),g&&(g.statisticsTimer&&clearTimeout(g.statisticsTimer),f=null,OvenPlayerConsole.log("Closing main peer connection..."),S&&clearTimeout(S),g.peerConnection&&g.peerConnection.close(),g.peerConnection=null,g=null),Object.keys(E).length>0){for(var n in E){var o=E[n].peerConnection;o&&(OvenPlayerConsole.log("Closing client peer connection..."),o.close(),o=null)}E={}}clearInterval(d),d=null,l?(OvenPlayerConsole.log("Closing websocket connection..."),OvenPlayerConsole.log("Send Signaling : Stop."),0!==l.readyState&&1!==l.readyState||(T=!0,g&&h(l,{command:"stop",id:g.id}),l.close())):T=!1,l=null,t&&i(t,e)}function h(e,t){e&&e.send(JSON.stringify(t))}return function(){var e=window.onbeforeunload;window.onbeforeunload=function(t){e&&e(t),OvenPlayerConsole.log("This calls auto when browser closed."),m()}}(),u.connect=function(){return OvenPlayerConsole.log("WebRTCLoader connecting..."),new Promise(function(e,n){OvenPlayerConsole.log("WebRTCLoader url : "+t),L()})},u.destroy=function(){m()},u}},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(312)),r=c(n(389)),a=n(27),i=n(65),s=n(1);function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){var c={},u=null,l=null,d={name:s.PROVIDER_WEBRTC,element:e,mse:null,listener:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:s.STATE_IDLE,buffer:0,framerate:0,currentQuality:-1,currentSource:-1,qualityLevels:[],sources:[],adTagUrl:n};return c=(0,o.default)(d,t,function(n){(0,a.isWebRTC)(n.file,n.type)&&(OvenPlayerConsole.log("WEBRTC : onBeforeLoad : ",n),u&&(u.destroy(),u=null),(u=(0,r.default)(c,n.file,function(t){e.srcObject&&(e.srcObject=null),e.srcObject=t},i.errorTrigger,t)).connect(function(){}).catch(function(e){}),c.on(s.CONTENT_META,function(){t.isAutoStart()},c))}),l=c.super("destroy"),OvenPlayerConsole.log("WEBRTC PROVIDER LOADED."),c.destroy=function(){u&&(u.destroy(),e.srcObject=null,u=null),c.off(s.CONTENT_META,null,c),OvenPlayerConsole.log("WEBRTC :  PROVIDER DESTROYED."),l()},c}}}]);